<!-- Sidebar Admin -->
<div class="admin-sidebar">
  <div class="sidebar-header">
    <h2 class="sidebar-logo">ParisCitizen</h2>
    <p class="sidebar-subtitle">Administrateur</p>
  </div>
  
  <nav class="sidebar-nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a routerLink="/admin/dashboard" routerLinkActive="active" class="nav-link">
          <span class="nav-icon">ğŸ“Š</span>
          <span class="nav-text">Dashboard</span>
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/admin/municipalites" routerLinkActive="active" class="nav-link">
          <span class="nav-icon">ğŸ›ï¸</span>
          <span class="nav-text">MunicipalitÃ©s</span>
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/admin/agents" routerLinkActive="active" class="nav-link">
          <span class="nav-icon">ğŸ‘¥</span>
          <span class="nav-text">Agents</span>
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/admin/citoyens" routerLinkActive="active" class="nav-link">
          <span class="nav-icon">ğŸ‘¤</span>
          <span class="nav-text">Citoyens</span>
        </a>
      </li>
      <li class="nav-item">
        <a routerLink="/admin/parametres" routerLinkActive="active" class="nav-link">
          <span class="nav-icon">âš™ï¸</span>
          <span class="nav-text">ParamÃ¨tres</span>
        </a>
      </li>
    </ul>
  </nav>
  
  <div class="sidebar-footer">
    <button class="logout-btn" (click)="logout()">
      <span class="nav-icon">ğŸšª</span>
      <span class="nav-text">DÃ©connexion</span>
    </button>
  </div>
</div>

<!-- Contenu principal -->
<div class="admin-main-content">
  <div class="dashboard-container">
    <div class="dashboard-header">
      <div>
        <h1 class="dashboard-title">Dashboard Administrateur</h1>
        <p style="color: var(--dark-color); margin: 0;">Supervision globale de la plateforme ParisCitizen</p>
      </div>
      <div class="user-info" *ngIf="currentUser">
        <div class="user-avatar">{{ currentUser.username.charAt(0).toUpperCase() }}</div>
        <div>
          <div style="font-weight: 600; color: var(--primary-color);">{{ currentUser.username }}</div>
          <div style="font-size: 0.9rem; color: var(--dark-color);">Administrateur</div>
        </div>
      </div>
    </div>

    <!-- Statistiques principales -->
    <div class="stats-grid" *ngIf="statistiques">
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <div class="stat-number">{{ statistiques.totalCitoyens | number }}</div>
          <div class="stat-label">Total Citoyens</div>
          <div class="stat-detail">Moyenne d'Ã¢ge: {{ statistiques.moyenneAge }} ans</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ğŸ›ï¸</div>
        <div class="stat-content">
          <div class="stat-number">{{ statistiques.totalMunicipalites }}</div>
          <div class="stat-label">MunicipalitÃ©s</div>
          <div class="stat-detail">{{ statistiques.totalAgents }} agents actifs</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-content">
          <div class="stat-number">{{ statistiques.totalProjets }}</div>
          <div class="stat-label">Projets Actifs</div>
          <div class="stat-detail">{{ statistiques.totalReclamations }} rÃ©clamations</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">â­</div>
        <div class="stat-content">
          <div class="stat-number">{{ statistiques.tauxSatisfactionGlobal }}%</div>
          <div class="stat-label">Satisfaction Globale</div>
          <div class="stat-detail">Moyenne toutes municipalitÃ©s</div>
        </div>
      </div>
    </div>

    <!-- Graphiques et analyses -->
    <div class="analytics-grid">
      <!-- Top municipalitÃ©s -->
      <div class="analytics-card">
        <div class="card-header">
          <h3>ğŸ† Top MunicipalitÃ©s</h3>
        </div>
        <div class="top-municipalites" *ngIf="statistiques">
          <div class="municipalite-item" *ngFor="let mun of statistiques.topMunicipalites">
            <div class="municipalite-info">
              <span class="municipalite-nom">{{ mun.nom }}</span>
              <span class="municipalite-reclamations">{{ mun.nombreReclamations }} rÃ©clamations</span>
            </div>
            <div class="municipalite-bar">
              <div class="municipalite-fill" [style.width.%]="mun.tauxSatisfaction"></div>
            </div>
            <span class="municipalite-satisfaction">{{ mun.tauxSatisfaction }}%</span>
          </div>
        </div>
      </div>

      <!-- ActivitÃ© mensuelle -->
      <div class="analytics-card">
        <div class="card-header">
          <h3>ğŸ“ˆ ActivitÃ© Mensuelle</h3>
        </div>
        <div class="chart-container" *ngIf="statistiques">
          <div class="chart-bars">
            <div class="chart-bar" *ngFor="let mois of statistiques.activiteMensuelle">
              <div class="bar-citoyens" [style.height.%]="getBarHeight(mois.nouveauxCitoyens)"></div>
              <div class="bar-reclamations" [style.height.%]="getBarHeight(mois.nouvellesReclamations / 2)"></div>
              <div class="bar-projets" [style.height.%]="getBarHeight(mois.projetsLances * 10)"></div>
              <span class="bar-label">{{ mois.mois }}</span>
            </div>
          </div>
          <div class="chart-legend">
            <div class="legend-item">
              <div class="legend-color citoyens"></div>
              <span>Nouveaux Citoyens</span>
            </div>
            <div class="legend-item">
              <div class="legend-color reclamations"></div>
              <span>Nouvelles RÃ©clamations</span>
            </div>
            <div class="legend-item">
              <div class="legend-color projets"></div>
              <span>Projets LancÃ©s</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- RÃ©partition par Ã¢ge -->
    <div class="age-distribution">
      <div class="analytics-card">
        <div class="card-header">
          <h3>ğŸ‘¥ RÃ©partition par Ã‚ge</h3>
        </div>
        <div class="age-bars" *ngIf="statistiques">
          <div class="age-item" *ngFor="let age of statistiques.repartitionParAge">
            <div class="age-tranche">{{ age.tranche }}</div>
            <div class="age-bar">
              <div class="age-fill" [style.width.%]="age.pourcentage"></div>
            </div>
            <div class="age-stats">
              <span class="age-number">{{ age.nombre }}</span>
              <span class="age-percentage">({{ age.pourcentage }}%)</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions rapides -->
    <div class="quick-actions">
      <h3>Actions Rapides</h3>
      <div class="actions-grid">
        <button class="action-btn" routerLink="/admin/municipalites">
          <span class="action-icon">ğŸ›ï¸</span>
          <span class="action-text">GÃ©rer MunicipalitÃ©s</span>
        </button>
        
        <button class="action-btn" routerLink="/admin/agents">
          <span class="action-icon">ğŸ‘¥</span>
          <span class="action-text">GÃ©rer Agents</span>
        </button>
        
        <button class="action-btn" routerLink="/admin/citoyens">
          <span class="action-icon">ğŸ‘¤</span>
          <span class="action-text">GÃ©rer Citoyens</span>
        </button>
        
        <button class="action-btn" routerLink="/admin/parametres">
          <span class="action-icon">âš™ï¸</span>
          <span class="action-text">ParamÃ¨tres SystÃ¨me</span>
        </button>
      </div>
    </div>
  </div>
</div>